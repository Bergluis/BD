CREATE DATABASE E
DEFAULT CHARSET UTF8
COLLATE UTF8_GENERAL_CI;

USE E;

CREATE TABLE curso(
idcurso INT(11) UNSIGNED NOT NULL PRIMARY KEY UNIQUE AUTO_INCREMENT,
nome VARCHAR(150) NOT NULL
);

CREATE TABLE orientador(
idorientador INT(11) UNSIGNED NOT NULL PRIMARY KEY UNIQUE AUTO_INCREMENT,
nome VARCHAR(100) NOT NULL,
cpf VARCHAR(20) NOT NULL,
instituicao VARCHAR(150) NOT NULL,
titulacao VARCHAR(100) NOT NULL
);

CREATE TABLE aluno(
idaluno INT(11) UNSIGNED NOT NULL PRIMARY KEY UNIQUE AUTO_INCREMENT,
matricula VARCHAR(30) NOT NULL,
nome VARCHAR(100) NOT NULL,
sexo TINYINT NOT NULL,
dataNascimento DATE NOT NULL,
cpf VARCHAR(20) NOT NULL,
idOrientador INT(11) UNSIGNED NOT NULL,
CONSTRAINT fk1
FOREIGN KEY (idOrientador)
REFERENCES orientador(idorientador)
);


CREATE TABLE curso_aluno(
aluno_idaluno INT(11) UNSIGNED NOT NULL,
curso_idcurso INT(11) UNSIGNED NOT NULL,
CONSTRAINT fk2
FOREIGN KEY (aluno_idaluno)
REFERENCES aluno(idaluno),
CONSTRAINT fk3
FOREIGN KEY (curso_idcurso)
REFERENCES curso(idcurso)
);

CREATE TABLE publicacao_aluno(
idaluno INT(11) UNSIGNED NOT NULL,
idOrientador INT(11) UNSIGNED NOT NULL,
CONSTRAINT fk4
FOREIGN KEY (idaluno)
REFERENCES aluno(idaluno),
CONSTRAINT fk5
FOREIGN KEY(idOrientador)
REFERENCES orientador(idorientador)
);

CREATE TABLE publicacao(
idpublicacao INT(11) UNSIGNED NOT NULL PRIMARY KEY UNIQUE AUTO_INCREMENT,
titulo VARCHAR(45) NOT NULL,
dataPublicacao DATE NOT NULL,
tipo VARCHAR(45) NOT NULL,
idOrientador INT(11) UNSIGNED NOT NULL,
CONSTRAINT fk6
FOREIGN KEY (idOrientador)
REFERENCES orientador(idorientador)
);
